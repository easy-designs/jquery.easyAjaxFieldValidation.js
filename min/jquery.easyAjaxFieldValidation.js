/* Easy Ajax Field Validation (c) Aaron Gustafson (@AaronGustafson). MIT License. https://github.com/easy-designs/jquery.easyAjaxFieldValidation.js */
(function(f,h){var b="easyAjaxFieldValidation",c=b+"-observing",i="ajax-field-validation",g=["button","keyup"],d={ui:g[0],method:"GET",response_param:"success",response_success_value:"yes",button_text:"Check",button_inner_wrapper:false,button_outer_wrapper:false,callback:function(l,j,k){if(l){alert("The check passed!")}else{alert("The check failed!")}}},e=f("body"),a=f('<button type="button"/>');f.fn.easyAjaxFieldValidation=function(l){l=f.extend(d,l);var k=f(this),m=e.data(c)||[];function j(q,n){var p={},s=q.data(i+"-method")||l.method,r=q.data(i+"-response-param")||l.response_param,o=q.data(i+"-response-success-value")||l.response_success_value;p[q.attr("name")]=q.val();f.ajax(n,{cache:false,data:p,type:s.toUpperCase(),success:function(t){var u=(t[r]!=h&&t[r]==o);l.callback(u,t,q)}})}return k.each(function(){var A=f(this),r=A.parent(),q,C,s,x,o=A.data(i)||l.url,z=A.data(i+"-ui")||l.ui,u=A.data(i+"-button-text")||l.button_text,w=A.data(i+"-button-inner-wrapper")||l.button_inner_wrapper,n=A.data(i+"-button-outer-wrapper")||l.button_outer_wrapper,p,y=/([^:.#\[]+)/,v=/\#([^:.#\[]+)/,B=/\.([^:.#\[]+)/g,t="$1";if(o==h){return}if(f.inArray(z,g)==-1){z=g[0]}if(z=="button"){q=a.clone();if(w){C=f("<"+w.match(y)[0]+"/>");s=w.match(v);if(s&&s.length){C.attr("id",s[0].replace(v,t))}s=w.match(B);if(s){x=s.length;while(x--){C.addClass(s[x].replace(B,t))}}C.text(u).appendTo(q)}else{q.text(u)}if(n){C=f("<"+n.match(y)[0]+"/>");s=n.match(v);if(s&&s.length){C.attr("id",s[0].replace(v,t))}s=n.match(B);if(s){x=s.length;while(x--){C.addClass(s[x].replace(B,t))}}C.appendTo(r);r=C}q.on("click keypress",function(D){if(D.type=="keypress"&&D.which!=13){return}j(A,o)}).appendTo(r)}else{if(z=="keyup"){A.on("keyup",function(D){if(p){clearTimeout(p);p=null}if(f.inArray(D.which,[9,13,27,37,38,39,40])>-1){return}p=setTimeout(function(){j(A,o)},500)})}}})}}(jQuery));