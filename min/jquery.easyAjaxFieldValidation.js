/* Easy Ajax Field Validation (c) Aaron Gustafson (@AaronGustafson). MIT License. https://github.com/easy-designs/jquery.easyAjaxFieldValidation.js */
(function(f,h){var b="easyAjaxFieldValidation",c=b+"-observing",i="ajax-field-validation",g=["button","keyup"],d={ui:g[0],method:"GET",response_param:"success",response_success_value:"yes",button_text:"Check",callback:function(k,j){if(k){alert("The check passed!")}else{alert("The check failed!")}}},e=f("body"),a=f('<button type="button"/>');f.fn.easyAjaxFieldValidation=function(l){l=f.extend(d,l);var k=f(this),m=e.data(c)||[];function j(q,n){var p={},s=q.data(i+"-method")||l.method,r=q.data(i+"-response-param")||l.response_param,o=q.data(i+"-response-success-value")||l.response_success_value;p[q.attr("name")]=q.val();f.ajax(n,{cache:false,data:p,type:s.toUpperCase(),success:function(t){var u=(t[r]!=h&&t[r]==o);l.callback(u,t)}})}return k.each(function(){var o=f(this),n=o.data(i)||l.url,q=o.data(i+"-ui")||l.ui,p=o.data(i+"-button-text")||l.button_text,r;if(n==h){return}if(f.inArray(q,g)==-1){q=g[0]}if(q=="button"){a.clone().text(p).appendTo(o.parent()).on("click keypress",function(s){if(s.type=="keypress"&&s.which!=13){return}j(o,n)})}else{if(q=="keyup"){o.on("keyup",function(){if(r){clearTimeout(r);r=null}r=setTimeout(function(){j(o,n)},500)})}}})};f("[data-"+i+"]").easyAjaxFieldValidation()}(jQuery));